<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Human Computer Interaction</title>

    <meta name="theme-color" content="#ffffff" />

    <!-- <link rel="stylesheet" href="../static/css/bundle.css" />
    <link rel="stylesheet" href="../static/css/style.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bundle.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chatroom.css') }}" />
    <script type="text/javascript">
        var myRoomID = "{{room_id}}";
        var myName = "{{display_name}}";
        var audioMuted = "{{mute_audio}}" === "1";
        var videoMuted = "{{mute_video}}" === "1";
        console.log(">> {{mute_audio}}, {{mute_video}}", audioMuted, videoMuted);
    </script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script>
        (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
                i[r] ||
                function () {
                    (i[r].q = i[r].q || []).push(arguments);
                }),
                (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
        })(
            window,
            document,
            "script",
            "https://www.google-analytics.com/analytics.js",
            "ga"
        );

        ga("create", "UA-193026365-1", { storage: "none" });
        ga("set", "anonymizeIp", true);
        ga("send", "pageview");
    </script>
    <script>
        function openNav() {
            document.getElementById("mySidepanel").style.width = "250px";
        }

        function closeNav() {
            document.getElementById("mySidepanel").style.width = "0";
        }
    </script>
</head>

<body>
    <div class="videos">
        <div class="video-container">
            <div id="mySidepanel" class="sidepanel">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                <div class="heading" style="text-align: center;">
                    <h4>Video Chat</h1>
                        <div class="room-info">
                            <!-- <h3>Room: <span class="heading-mark">{{room_id}}</span></h3> -->
                            <h5>You have joined as <span class="heading-mark">{{display_name}}</span></h5>
                            <div>Ask your friends to go through this link and
                                <span id="location"></span>
                                join using the room id:
                                <span class="heading-mark">{{room_id}}</span>
                            </div>
                            <div id="room_link"></div>
                        </div>
                </div>
            </div>
            <button class="openbtn" onclick="openNav()">☰ Video Chat Info</button>


            <div class="container-fluid">
                <div id="video_grid" class="video-grid"></div>

                <div id="control_box">
                    <div class="button-box">
                        <button id="bttn_mute" class="btn btn-lg btn-outline-secondary rounded-circle p-4==">
                            <span id="mute_icon" class="material-icons pt-2">
                                mic
                            </span>
                        </button>
                        <button id="bttn_vid_mute" class="btn btn-lg btn-outline-secondary rounded-circle">
                            <span id="vid_mute_icon" class="material-icons pt-2">
                                videocam
                            </span>
                        </button>
                        <button id="call_end" class="btn btn-lg btn-danger rounded-circle">
                            <span class="material-icons pt-2">
                                call_end
                            </span>
                        </button>
                    </div>
                    <div id="div_local_vid">
                        <div class="vid-wrapper">
                            <video id="local_vid" class="video-player" autoplay muted></video>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<!-- <script src="../static/js/index.js"></script> -->
<!-- <script src="{{ url_for('static', filename='js/index.js') }}"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"
    integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA=="
    crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/chatroom_networking.js') }}"></script>
<script src="{{ url_for('static', filename='js/chatroom_ui.js') }}"></script>
<script>
    var protocol = window.location.protocol;
    // console(protocol + '//' + document.domain + ':' + location.port)
    document.getElementById('location').textContent = protocol + '//' + document.domain + ':' + location.port + '/chat';
</script>


</html>